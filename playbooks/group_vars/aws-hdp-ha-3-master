###########
#
# These variables would be used by the 'blueprint_dynamic.j2' Jinja2 template to generate the blueprint JSON.
# This blueprint will build an HDP cluster with 3 master services nodes and 1 or more slave nodes.
#   hdp-masternode-01 & hdp-masternode-02:
#       - Master nodes hosting HA Hadoop services
#   hdp-management:
#       - Master node hosting Ambari and other utility services
#   hdp-worker:
#       - Worker nodes hosting data node and hbase region servers
#   hdp-ingest:
#       - Node hosting services that ingest log data into the platform
#   hdp-db
#       - Node for Ambari and Hive metastores, and its an external database
# The other two master services are running the main HA Hadoop services.
# It will also install Ranger (both Admin and UserSync) on the management node.
#
###########

blueprint_name: '{{ cluster_name }}_blueprint'                  # the name of the blueprint as it will be stored in Ambari
blueprint_file: 'blueprint_dynamic.j2'                          # the blueprint JSON file - 'blueprint_dynamic.j2' is a Jinja2 template that generates the required JSON
blueprint_dynamic:                                              # properties for the dynamic blueprint - these are only used by the 'blueprint_dynamic.j2' template to generate the JSON
  - role: "hdp-masternode-01"
    clients: ['ZOOKEEPER_CLIENT', 'HDFS_CLIENT', 'YARN_CLIENT', 'MAPREDUCE2_CLIENT', 'HIVE_CLIENT', 'OOZIE_CLIENT', 'INFRA_SOLR_CLIENT', 'SPARK2_CLIENT', 'HBASE_CLIENT']
    services:
      - ZOOKEEPER_SERVER
      - NAMENODE
      - ZKFC
      - JOURNALNODE
      - RESOURCEMANAGER
      - HBASE_MASTER
      - METRICS_MONITOR
  - role: "hdp-masternode-02"
    clients: ['ZOOKEEPER_CLIENT', 'HDFS_CLIENT', 'YARN_CLIENT', 'MAPREDUCE2_CLIENT', 'HIVE_CLIENT', 'OOZIE_CLIENT', 'INFRA_SOLR_CLIENT', 'SPARK2_CLIENT', 'HBASE_CLIENT']
    services:
      - ZOOKEEPER_SERVER
      - NAMENODE
      - ZKFC
      - JOURNALNODE
      - RESOURCEMANAGER
      - HBASE_MASTER
      - METRICS_MONITOR
  - role: "hdp-management"
    clients: ['ZOOKEEPER_CLIENT', 'HDFS_CLIENT', 'YARN_CLIENT', 'MAPREDUCE2_CLIENT', 'HIVE_CLIENT', 'OOZIE_CLIENT', 'INFRA_SOLR_CLIENT', 'SPARK2_CLIENT', 'HBASE_CLIENT']
    services:
      - ZOOKEEPER_SERVER
      - JOURNALNODE
      - OOZIE_SERVER
      - AMBARI_SERVER
      - HIVE_SERVER
      - HIVE_METASTORE
      - INFRA_SOLR
      - RANGER_ADMIN
      - RANGER_USERSYNC
      - STORM_UI_SERVER
      - METRICS_COLLECTOR
      - METRICS_GRAFANA
      - METRICS_MONITOR
  - role: "hdp-worker"
    clients: ['ZOOKEEPER_CLIENT', 'HDFS_CLIENT', 'YARN_CLIENT', 'MAPREDUCE2_CLIENT', 'TEZ_CLIENT', 'SLIDER', 'PIG', 'SQOOP', 'HIVE_CLIENT', 'HCAT', 'OOZIE_CLIENT', 'INFRA_SOLR_CLIENT', 'SPARK2_CLIENT', 'HBASE_CLIENT']
    services:
      - DATANODE
      - NODEMANAGER
      - HBASE_REGIONSERVER
      - METRICS_MONITOR
  - role: "hdp-ingest"
    clients: ['ZOOKEEPER_CLIENT', 'HDFS_CLIENT', 'YARN_CLIENT', 'MAPREDUCE2_CLIENT', 'TEZ_CLIENT', 'SLIDER', 'PIG', 'SQOOP', 'HIVE_CLIENT', 'HCAT', 'OOZIE_CLIENT', 'INFRA_SOLR_CLIENT', 'SPARK2_CLIENT', 'HBASE_CLIENT']
    services:
      - KAFKA_BROKER
      - SUPERVISOR
      - METRICS_MONITOR
